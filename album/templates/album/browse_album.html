<!DOCTYPE html>
<html>
<head>
    <title>View Album</title>
</head>
<body>
    <h1>View Album</h1>
    <p>Name: {{ album.album_name }}</p>
    <p>Date: {{ album.date_of_creation }}</p>
    <p>Owner: {{ album.user }}</p>
    <p>Photos:</p>
    <ul>
        <ul>
            {% for photo_tag_map in photo_tag_maps %}
            <li>
                <img src="{{ photo_tag_map.photo.photo_data }}" alt="Photo">
                <p>Caption: {{ photo_tag_map.photo.caption }}</p>

                <p>Tags: {% for tag in photo_tag_map.tags %}</p>
                            <a href = '#'>{{tag.description}}</a>   <!-- THIS SHOULDN'T BE AN # href. it should lead to the photos of that tag. -->
                         {% endfor %}
                <br>
                <br>     

                <p> Comments: </p>
                {% for comment in comments %}
                {% if comment.photo_id == photo_tag_map.photo.photo_id %}
                <p>{{ comment.comment_text }}</p>
                <p>By: {% if comment.user_id == None %}
                    Anonymous
                    {% else %}
                    {{ comment.user.first_name }}
                    {% endif %}
                {% endif %}
                {% endfor %}
    
            </li>

            <form method="post" action="/comment/add_comment_to_photo/{{ photo_tag_map.photo.photo_id }}/">
            {% csrf_token %}
            {{ form.as_p }}

            <button type="submit">Add a new comment</button>
        </form>
        </ul>
    </br>
        {% endfor %}

    <a href="/">Back to home</a>
</html>